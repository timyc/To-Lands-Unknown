$("#usernameReg").keypress(function(e){var t=new RegExp("^[a-zA-Z0-9]+$"),n=String.fromCharCode(e.charCode?e.charCode:e.which);return!!t.test(n)||(e.preventDefault(),!1)}),$("#regClick").click(function(){document.getElementById("loginSection").style.display="none",document.getElementById("loginSection").style.opacity="0",$("#registrationSection").fadeTo(1e3,1,function(){document.getElementById("registrationSection").style.display="block"})}),$("#logClick").click(function(){document.getElementById("registrationSection").style.display="none",document.getElementById("registrationSection").style.opacity="0",$("#loginSection").fadeTo(1e3,1,function(){document.getElementById("loginSection").style.display="block"})});var register_attempt=0;function register(){$(":button").prop("disabled",!0),setTimeout(function(){$(":button").prop("disabled",!1)},3e3);var e=Date.now();e-register_attempt<3e3||(register_attempt=e,document.getElementById("g-recaptcha-response").value?document.getElementById("tos").checked?document.getElementById("passwordReg").value==document.getElementById("passwordRegConfirm").value?$.ajax({type:"POST",url:"/regAuth",data:{username:$("#usernameReg").val(),password:$("#passwordReg").val(),email:$("#emailReg").val(),gender:$("#gender option:selected").val(),captchaResponse:$("#g-recaptcha-response").val(),ref:$("#referralReg").val()},success:function(e){$("#usernameLogin").val($("#usernameReg").val()),$("#passwordLogin").val($("#passwordReg").val()),login()},error:function(e){document.getElementById("regOutput").innerHTML=e.responseText,grecaptcha.reset()}}):document.getElementById("regOutput").innerHTML="<font color='red'>Passwords do not match!</font>":document.getElementById("regOutput").innerHTML="<font color='red'>You must accept the Terms of Service to register.</font>":document.getElementById("regOutput").innerHTML="<font color='red'>Invalid reCAPTCHA.</font>")}var login_attempt=0;function login(){$(":button").prop("disabled",!0),setTimeout(function(){$(":button").prop("disabled",!1)},5e3);var e=Date.now();if(!(e-login_attempt<5e3)){login_attempt=e;new Date;$.ajax({type:"POST",url:"/loginAuth",data:{username:$("#usernameLogin").val(),password:$("#passwordLogin").val()},success:function(e){window.location.href="/main"},error:function(e){document.getElementById("logOutput").innerHTML=e.responseText}})}}function keyup(e){13==e&&login()}